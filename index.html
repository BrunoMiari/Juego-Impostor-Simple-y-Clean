<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego del Impostor</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Pantalla de inicio -->
        <div id="home-screen" class="screen active">
            <div class="logo">
                <h1>ğŸ­ IMPOSTOR</h1>
                <p>Juego para amigos</p>
            </div>
            <button class="btn-primary" onclick="showSetup()">Nuevo Juego</button>
            <button class="btn-secondary" onclick="showRules()">CÃ³mo Jugar</button>
        </div>

        <!-- Pantalla de configuraciÃ³n -->
        <div id="setup-screen" class="screen">
            <h2>Configurar Juego</h2>

            <div class="setup-section">
                <label>NÃºmero de jugadores (3-12):</label>
                <input type="number" id="player-count" min="3" max="12" value="5">
            </div>

            <div class="setup-section">
                <label>Tema:</label>
                <select id="theme-select" onchange="toggleThemeVisibility()">
                    <option value="random">ğŸ² Aleatorio</option>
                    <option value="custom">âš™ï¸ Personalizado</option>
                    <option value="animales">ğŸ¾ Animales</option>
                    <option value="comida">ğŸ• Comida</option>
                    <option value="deportes">âš½ Deportes</option>
                    <option value="peliculas">ğŸ¬ PelÃ­culas</option>
                    <option value="paises">ğŸŒ PaÃ­ses</option>
                    <option value="profesiones">ğŸ‘¨â€ğŸ’¼ Profesiones</option>
                    <option value="colores">ğŸ¨ Colores</option>
                    <option value="objetos">ğŸ“± Objetos</option>
                    <option value="musica">ğŸµ MÃºsica</option>
                    <option value="tecnologia">ğŸ’» TecnologÃ­a</option>
                    <option value="naturaleza">ğŸŒ¿ Naturaleza</option>
                    <option value="ciencia">ğŸ”¬ Ciencia</option>
                </select>
            </div>

            <div class="setup-section" id="custom-categories-section" style="display: none;">
                <button class="btn-categories" onclick="openCategoriesModal()">
                    âš™ï¸ Seleccionar CategorÃ­as (<span id="selected-count">12</span>)
                </button>
            </div>

            <div class="setup-section" id="theme-visibility-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="show-theme"> Los jugadores conocen el tema
                </label>
            </div>

            <div class="setup-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="give-hint"> Dar pista al impostor
                </label>
            </div>

            <div class="setup-section">
                <label>Modo de juego:</label>
                <select id="special-mode" onchange="toggleRolesConfig()">
                    <option value="normal">Normal</option>
                    <option value="crazy">ğŸ¤ª Modo Loco</option>
                    <option value="roles-plus">ğŸ­ Roles+</option>
                </select>
            </div>

            <!-- ConfiguraciÃ³n de roles para modo Roles+ -->
            <div id="roles-config" class="setup-section" style="display: none;">
                <button class="btn-categories" onclick="openRolesModal()">
                    ğŸ­ Configurar Roles (<span id="roles-summary">1 Impostor, 1 Ayudante, 1 NiÃ±o</span>)
                </button>
            </div>

            <div class="setup-section">
                <label>Tipo de rondas:</label>
                <select id="round-type">
                    <option value="elimination">ğŸ¯ EliminaciÃ³n por rondas</option>
                    <option value="single-vote">ğŸ—³ï¸ Una sola votaciÃ³n</option>
                </select>
            </div>

            <button class="btn-primary" onclick="showPlayerNames()">Continuar</button>
            <button class="btn-secondary" onclick="showHome()">Volver</button>
        </div>

        <!-- Pantalla de nombres -->
        <div id="names-screen" class="screen">
            <h2>Nombres de Jugadores</h2>
            <div id="player-names-container"></div>
            <button class="btn-primary" onclick="startGame()">Iniciar Juego</button>
            <button class="btn-secondary" onclick="showSetup()">Volver</button>
        </div>

        <!-- Pantalla de selecciÃ³n de jugadores -->
        <div id="roles-screen" class="screen">
            <h2>Seleccionar Jugador</h2>
            <div class="role-info">
                <p>Cada jugador debe seleccionar su nombre para ver su rol</p>
            </div>
            <div id="players-grid" class="players-grid"></div>
            <button id="start-discussion-btn" class="btn-success hidden" onclick="startDiscussion()">Iniciar
                DiscusiÃ³n</button>
        </div>
        
        <!-- BotÃ³n Nuevo Juego fuera del contenedor principal -->
        <div id="new-game-container" class="new-game-outside">
            <button class="btn-secondary" onclick="showHomeAndReset()">ğŸ² Nuevo Juego</button>
        </div>

        <!-- Pantalla individual de rol -->
        <div id="individual-role-screen" class="screen">
            <h2 id="selected-player-name"></h2>
            <div class="role-reveal-container">
                <div class="role-reveal-card" onclick="revealRoleFixed()">
                    <div class="role-reveal-text">
                        <h3>ğŸ‘† Toca para ver tu rol</h3>
                        <p>AsegÃºrate de que nadie mÃ¡s estÃ© mirando</p>
                    </div>
                </div>
                <div id="role-content-display" class="role-card hidden">
                    <div id="individual-role-content"></div>
                </div>
            </div>
            <div class="role-actions">
                <button class="btn-secondary" onclick="backToPlayerSelection()">Volver a selecciÃ³n</button>
            </div>
        </div>

        <!-- Pantalla de quien empieza -->
        <div id="starter-screen" class="screen">
            <div class="starter-announcement">
                <h2>ğŸ¯ Comienza la DiscusiÃ³n</h2>
                <div class="starter-player">
                    <div class="starter-icon">ğŸ—£ï¸</div>
                    <div id="starter-name" class="starter-name"></div>
                    <p>empieza la discusiÃ³n</p>
                </div>
                <button class="btn-primary" onclick="proceedToDiscussion()">Continuar</button>
            </div>
        </div>

        <!-- Pantalla de discusiÃ³n -->
        <div id="discussion-screen" class="screen">
            <h2>ğŸ’¬ Fase de DiscusiÃ³n</h2>
            <div class="game-info">
                <div id="theme-info"></div>
                <div class="timer">
                    <span id="timer-display">5:00</span>
                </div>
            </div>
            <div class="players-list">
                <h3>Jugadores:</h3>
                <div id="players-display"></div>
            </div>
            <button class="btn-primary" onclick="startVoting()">Iniciar VotaciÃ³n</button>
            <button id="manual-vote-btn" class="btn-success hidden" onclick="startVoting()">ğŸ—³ï¸ Votar Ahora</button>
            <button class="btn-secondary" onclick="showHomeAndReset()">Nuevo Juego</button>
        </div>

        <!-- Pantalla de votaciÃ³n -->
        <div id="voting-screen" class="screen">
            <h2>ğŸ—³ï¸ VotaciÃ³n</h2>
            <p>Â¿QuiÃ©n creen que es el impostor?</p>
            <div id="voting-options"></div>
            <button id="reveal-btn" class="btn-primary" onclick="revealResults()">Revelar Resultados</button>
            <button class="btn-secondary" onclick="showHomeAndReset()">Nuevo Juego</button>
        </div>

        <!-- Pantalla de eliminaciÃ³n -->
        <div id="elimination-screen" class="screen">
            <div class="elimination-announcement">
                <h2>ğŸ—³ï¸ Resultado de la VotaciÃ³n</h2>
                <div class="eliminated-player">
                    <div class="elimination-icon">âŒ</div>
                    <div id="eliminated-name" class="eliminated-name"></div>
                    <div id="eliminated-role" class="eliminated-role"></div>
                    <p id="elimination-message"></p>
                </div>
                <button id="continue-game-btn" class="btn-primary" onclick="continueAfterElimination()">Continuar
                    Juego</button>
                <button id="end-game-btn" class="btn-success hidden" onclick="showFinalResults()">Ver Resultados
                    Finales</button>
            </div>
        </div>

        <!-- Pantalla de resultados -->
        <div id="results-screen" class="screen">
            <h2>ğŸ‰ Resultados Finales</h2>
            <div id="results-content"></div>
            <button class="btn-primary" onclick="showHomeAndReset()">Nuevo Juego</button>
        </div>

        <!-- Pantalla de reglas -->
        <div id="rules-screen" class="screen">
            <h2>ğŸ“‹ CÃ³mo Jugar</h2>
            <div class="rules-content">
                <h3>Objetivo:</h3>
                <p>Los <strong>inocentes</strong> deben descubrir quiÃ©n es el <strong>impostor</strong>.</p>
                <p>El <strong>impostor</strong> debe pasar desapercibido.</p>

                <h3>CÃ³mo jugar:</h3>
                <ol>
                    <li>Cada jugador ve su rol secretamente</li>
                    <li>Los inocentes reciben una palabra del tema elegido</li>
                    <li>El impostor NO conoce la palabra (o recibe una pista)</li>
                    <li>Todos discuten y hacen preguntas sobre la palabra</li>
                    <li>Al final, votan por quiÃ©n creen que es el impostor</li>
                </ol>

                <h3>Modos especiales:</h3>
                <p><strong>Modo Loco:</strong></p>
                <p>â€¢ <strong>Todos Inocentes:</strong> Nadie es impostor, deben darse cuenta</p>
                <p>â€¢ <strong>Todos Impostores:</strong> Nadie conoce la palabra real</p>
                
                <p><strong>Modo Roles+:</strong> AÃ±ade roles especiales al juego</p>
                <p>â€¢ <strong>ğŸ­ Impostor:</strong> No conoce la palabra (como siempre)</p>
                <p>â€¢ <strong>ğŸŸ  Ayudante:</strong> Conoce la palabra y quiÃ©n es el impostor. Debe ayudar al impostor a ganar sin ser descubierto. Tiene palabras TABÃš que no puede decir.</p>
                <p>â€¢ <strong>ğŸ”µ NiÃ±o Inocente:</strong> Es un inocente normal, pero si lo eliminan, Â¡Ã‰L GANA! Debe jugar normal pero si sospechan de Ã©l, perfecto.</p>
                <p>â€¢ <strong>ğŸ˜‡ Inocentes:</strong> Conocen la palabra (como siempre)</p>
            </div>
            <button class="btn-primary" onclick="showHome()">Volver</button>
        </div>
    </div>

    <!-- Modal de categorÃ­as personalizadas -->
    <div id="categories-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âš™ï¸ Seleccionar CategorÃ­as</h3>
                <button class="modal-close" onclick="closeCategoriesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="categories-grid">
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-animales" value="animales" checked> ğŸ¾ Animales
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-comida" value="comida" checked> ğŸ• Comida
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-deportes" value="deportes" checked> âš½ Deportes
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-peliculas" value="peliculas" checked> ğŸ¬ PelÃ­culas
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-paises" value="paises" checked> ğŸŒ PaÃ­ses
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-profesiones" value="profesiones" checked> ğŸ‘¨â€ğŸ’¼ Profesiones
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-colores" value="colores" checked> ğŸ¨ Colores
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-objetos" value="objetos" checked> ğŸ“± Objetos
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-musica" value="musica" checked> ğŸµ MÃºsica
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-tecnologia" value="tecnologia" checked> ğŸ’» TecnologÃ­a
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-naturaleza" value="naturaleza" checked> ğŸŒ¿ Naturaleza
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cat-ciencia" value="ciencia" checked> ğŸ”¬ Ciencia
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-actions">
                    <button type="button" class="btn-small" onclick="selectAllCategories()">Todas</button>
                    <button type="button" class="btn-small" onclick="deselectAllCategories()">Ninguna</button>
                </div>
                <button class="btn-primary" onclick="saveCategoriesSelection()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal de configuraciÃ³n de roles -->
    <div id="roles-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ­ ConfiguraciÃ³n de Roles</h3>
                <button class="modal-close" onclick="closeRolesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="roles-config-compact">
                    <div class="role-item impostor">
                        <div class="role-header">
                            <span class="role-emoji">ğŸ­</span>
                            <span class="role-name">Impostores</span>
                        </div>
                        <select id="impostor-count" class="role-select">
                            <option value="1" selected>1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    
                    <div class="role-item helper">
                        <div class="role-header">
                            <span class="role-emoji">ğŸŸ </span>
                            <span class="role-name">Ayudantes</span>
                        </div>
                        <select id="helper-count" class="role-select">
                            <option value="0">0</option>
                            <option value="1" selected>1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    
                    <div class="role-item child">
                        <div class="role-header">
                            <span class="role-emoji">ğŸ”µ</span>
                            <span class="role-name">NiÃ±os</span>
                        </div>
                        <select id="child-count" class="role-select">
                            <option value="0">0</option>
                            <option value="1" selected>1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                </div>
                
                <div class="roles-warning" id="roles-warning" style="display: none;">
                    <div class="warning-content">
                        <span class="warning-icon">âš ï¸</span>
                        <span class="warning-text">Necesitas mÃ¡s jugadores para esta configuraciÃ³n</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-actions">
                    <button type="button" class="btn-small" onclick="resetRolesConfig()">Resetear</button>
                </div>
                <button class="btn-primary" onclick="saveRolesConfiguration()">Guardar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>